use leptos::prelude::*;
use rand::seq::SliceRandom;

const QUESTIONS: [&str; 50] = [
    "í‰ìƒ í•œ ê°€ì§€ë§Œ ë¨¹ì–´ì•¼ í•œë‹¤ë©´ ë­ ë¨¹ì„ë˜ìš”?",
    "ê°‘ìê¸° íˆ¬ëª…ì¸ê°„ì´ ëœë‹¤ë©´ ì œì¼ ë¨¼ì € ë­ í•  ê±´ê°€ìš”?",
    "í•˜ë£¨ ë™ì•ˆ ë™ë¬¼ë¡œ ë³€í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¤ ë™ë¬¼?",
    "ë³¸ì¸ ì¸ìƒì—ì„œ ê°€ì¥ ì–´ì´ì—†ì—ˆë˜ ì‹¤ìˆ˜ëŠ”?",
    "ë³µê¶Œ 1ë“± ë˜ë©´ ì œì¼ ë¨¼ì € ëˆ„êµ¬ì—ê²Œ ë§í•  ê±´ê°€ìš”?",
    "ì ˆëŒ€ ëª» ë¨¹ëŠ” ìŒì‹ í•˜ë‚˜ë§Œ ê³ ë¥¸ë‹¤ë©´?",
    "ì¢€ë¹„ ì•„í¬ì¹¼ë¦½ìŠ¤ê°€ ì˜¤ë©´ ì œì¼ ë¨¼ì € ì±™ê¸¸ ë¬¼ê±´ì€?",
    "ì§€ê¸ˆê¹Œì§€ ë“¤ì–´ë³¸ ë³„ëª… ì¤‘ ê°€ì¥ ì›ƒê²¼ë˜ ê±´?",
    "ë³¸ì¸ì´ ìƒê°í•˜ëŠ” â€œë‚˜ì˜ TMIâ€ í•˜ë‚˜ ê³µê°œí•œë‹¤ë©´?",
    "ë¬´ì¸ë„ì— ê°€ë©´ ê¼­ ë°ë ¤ê°€ê³  ì‹¶ì€ ì‚¬ëŒì€?",
    "ì»¤í”¼ vs ì°¨?",
    "ì—¬ë¦„ vs ê²¨ìš¸?",
    "ì§‘ì½• vs ë°–ì—ì„œ ë†€ê¸°?",
    "ì•„ì¹¨í˜• ì¸ê°„ vs ì•¼í–‰ì„±?",
    "ë‹¨ì§ ë‹¨ì§  vs ë‹´ë°±?",
    "ë„·í”Œë¦­ìŠ¤ ì •ì£¼í–‰ vs ìœ íŠœë¸Œ ì•Œê³ ë¦¬ì¦˜?",
    "ê³„íší˜• ì—¬í–‰ vs ì¦‰í¥ ì—¬í–‰?",
    "í˜¼ë°¥ ì˜í•¨ vs í˜¼ë°¥ ì–´ë ¤ì›€?",
    "ì „í™” vs ë¬¸ì?",
    "ê°•ì•„ì§€ vs ê³ ì–‘ì´?",
    "ì¸ìƒ ì˜í™” í•˜ë‚˜ë§Œ ê³ ë¥¸ë‹¤ë©´?",
    "íƒ€ì„ë¨¸ì‹ ì´ ìˆë‹¤ë©´ ê³¼ê±° vs ë¯¸ë˜?",
    "ê°‘ìê¸° 10ì–µ ìƒê¸°ë©´ ë­ë¶€í„° í• ê¹Œìš”?",
    "ë‹¤ì‹œ íƒœì–´ë‚˜ë©´ ê¼­ í•´ë³´ê³  ì‹¶ì€ ì§ì—…ì€?",
    "ë‚˜ë¥¼ ê°€ì¥ ì˜ ì„¤ëª…í•˜ëŠ” ì˜í™”/ë“œë¼ë§ˆ ìºë¦­í„°ëŠ”?",
    "í‰ìƒ í•œ ë…¸ë˜ë§Œ ë“¤ì–´ì•¼ í•œë‹¤ë©´?",
    "ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„ ë•Œ ë‚˜ë§Œì˜ í•´ì†Œë²•ì€?",
    "ê¼­ í•œ ë²ˆ ê°€ë³´ê³  ì‹¶ì€ ë‚˜ë¼/ë„ì‹œëŠ”?",
    "ì§€ê¸ˆ ë‹¹ì¥ íœ´ê°€ ì¤€ë‹¤ë©´ ë­ í•˜ê³  ì‹¶ì–´ìš”?",
    "ìš”ì¦˜ ê°€ì¥ ë¹ ì ¸ ìˆëŠ” ì†Œì†Œí•œ ì·¨ë¯¸ëŠ”?",
    "ìµœê·¼ì— ì œì¼ ë§ì´ ì›ƒì—ˆë˜ ìˆœê°„ì€?",
    "ìš”ì¦˜ ê°€ì¥ ê°ì‚¬í•œ ì¼ í•˜ë‚˜ëŠ”?",
    "ë‚˜ë§Œì˜ ì†Œí™•í–‰(ì†Œì†Œí•˜ì§€ë§Œ í™•ì‹¤í•œ í–‰ë³µ)ì€?",
    "ìµœê·¼ì— ë„ì „í•´ë³¸ ìƒˆë¡œìš´ ê²Œ ìˆë‹¤ë©´?",
    "ì–´ë¦° ì‹œì ˆ ê¿ˆì€ ë­ì˜€ì–´ìš”?",
    "í•˜ë£¨ ì¤‘ ì œì¼ ì¢‹ì•„í•˜ëŠ” ì‹œê°„ëŒ€ëŠ”?",
    "ìš”ì¦˜ ë‚˜ë¥¼ ê°€ì¥ ì„¤ë ˆê²Œ í•˜ëŠ” ê±´?",
    "ë‹¤ì‹œ ê¼­ í•´ë³´ê³  ì‹¶ì€ í•™ì°½ì‹œì ˆ í™œë™ì€?",
    "ìµœê·¼ì— â€œì•„, ë‚˜ ì–´ë¥¸ ëêµ¬ë‚˜â€ ëŠë‚€ ìˆœê°„ì€?",
    "ì˜¤ëŠ˜ ì´ ìë¦¬ì—ì„œ ê¼­ ì–»ì–´ê°€ê³  ì‹¶ì€ ê²Œ ìˆë‹¤ë©´?",
    "ë‘ ì‚¬ëŒì´ ë¬¼ì— ë¹ ì¡ŒìŠµë‹ˆë‹¤. ëˆ„êµ¬ë¥¼ êµ¬í• ê¹Œìš”? 1. ì¹´ë¦¬ë‚˜, 2. ì¬ìŠ¹ë‹˜",
    "íŒ€ì—ì„œ ì œì¼ ì¼ì„ ë§ì´ í•˜ëŠ”ê²ƒ ê°™ì€ ì‚¬ëŒì€?",
    "ì²«ì¸ìƒê³¼ ì‹¤ì œ ì„±ê²©ì´ ì •ë°˜ëŒ€ì˜€ë˜ ì‚¬ëŒì´ ìˆë‚˜ìš”? (íšŒì‚¬ì—ì„œ)",
    "ì˜¤í”¼ìŠ¤ì— 'ì´ê±´ ì •ë§ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤' ë¼ê³  ìƒê°í•˜ëŠ” ê²ƒì´ ìˆë‹¤ë©´?",
    "íŒ€ì›ë“¤ ì¤‘ í•œëª…ì—ê²Œ ë‘ì«€ì¿ ë¥¼ ì¤€ë‹¤ë©´ ëˆ„êµ¬ì—ê²Œ ì¤„ê¹Œìš”?",
    "ë¬´ì¸ë„ì—ì„œ ì‚´ì•„ë‚¨ì„ í™•ë¥ ì´ ê°€ì¥ ë†’ì„ê²ƒ ê°™ì€ íŒ€ì›ì€ ëˆ„êµ¬ì¸ê°€ìš”?",
    "ì œì¼ ìˆ ì„ ì˜ ë¨¹ì„ê²ƒ ê°™ì€ íŒ€ì›ì€ ëˆ„êµ¬ì¸ê°€ìš”?",
    "ê³¼ê±°ë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆë‹¤ë©´ ë‹¤ì‹œ LINE Pay Plusì— ì…ì‚¬í•˜ì‹¤ ê±´ê°€ìš”?",
    "ë…¸ë˜ë¥¼ ì œì¼ ì˜ ë¶€ë¥¼ê²ƒ ê°™ì€ ì‚¬ëŒì„ ê³¨ë¼ì£¼ì„¸ìš”.",
    "LINE Pay Plus ìµœê³  ê½ƒë¯¸ë‚¨ì€ ëˆ„êµ¬ì¸ê°€ìš”?",
];

const WELCOME: &str = "ğŸ˜„";

#[component]
fn App() -> impl IntoView {
    let (pool, set_pool) = signal(Vec::from(QUESTIONS));
    let (question, set_question) = signal(WELCOME);

    let mut rng = rand::rng();

    set_pool.update(|pool| {
        pool.shuffle(&mut rng);
    });

    let next_question = move |_| {
        set_pool.update(|p| {
            let result = p.pop();
            if let Some(next_question) = result {
                set_question.set(next_question);
            } else {
                set_question.set("ì§ˆë¬¸ì´ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤!");
            }
        });
    };

    let reset_questions = move |_| {
        set_pool.update(|pool| {
            *pool = Vec::from(QUESTIONS);
            pool.shuffle(&mut rng);
        });
        set_question.set(WELCOME);
    };

    view! {
        <div class="layout">
            <h1>ë¬´ì‘ìœ„ ì§ˆë¬¸ ìƒì„±ê¸°</h1>
            <div class="layout_inner">
                <aside>"ë‚¨ì€ ì§ˆë¬¸: " {move || pool.get().len()} " ê°œ"</aside>
                <p>{question}</p>
                <button on:click=next_question>
                    ë‹¤ìŒ ì§ˆë¬¸
                </button>
                <button on:click=reset_questions>
                    ì§ˆë¬¸ ì´ˆê¸°í™”
                </button>
            </div>
        </div>
    }
}

fn main() {
    leptos::mount::mount_to_body(App);
}
